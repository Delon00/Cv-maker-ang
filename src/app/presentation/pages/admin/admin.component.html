<div class="admin-layout">
  <aside class="side-panel" [class.collapsed]="isSidebarCollapsed">
    <div class="sidebar-header">
      <div class="logo">
        <div class="logo-icon">A</div>
        <span>AdminPanel</span>
      </div>
    </div>

    <nav class="sidebar-nav">
      <div class="nav-group">
        <span class="group-title">Principal</span>
        <a routerLink="/admin" 
           routerLinkActive="active" 
           [routerLinkActiveOptions]="{exact: true}" 
           class="nav-item">
          <i class="pi pi-chart-bar"></i>
          <span>Dashboard</span>
        </a>
        <a routerLink="/admin/users" 
           routerLinkActive="active" 
           class="nav-item">
          <i class="pi pi-users"></i>
          <span>Utilisateurs</span>
        </a>
      </div>

      <div class="nav-group">
        <span class="group-title">Contenu</span>
        <a routerLink="/admin/templates" 
           routerLinkActive="active" 
           class="nav-item">
          <i class="pi pi-clone"></i>
          <span>Templates CV</span>
        </a>
        <a routerLink="/admin/settings" 
           routerLinkActive="active" 
           class="nav-item">
          <i class="pi pi-cog"></i>
          <span>Configuration</span>
        </a>
      </div>
    </nav>

    <div class="sidebar-footer">
      <button (click)="logout()" class="logout-btn">
        <i class="pi pi-sign-out"></i>
        <span>Déconnexion</span>
      </button>
    </div>
  </aside>

  <main class="main-content">
    
    <header class="top-bar">
      <div class="search-bar">
        <i class="pi pi-search"></i>
        <input type="text" placeholder="Rechercher une ressource...">
      </div>
      <div class="admin-profile">
        <div class="text-info">
          <span class="admin-name">Administrateur</span>
          <span class="role-badge">Super Admin</span>
        </div>
        <div class="avatar">AD</div>
      </div>
    </header>

    <section class="content-wrapper">
      
      <router-outlet></router-outlet>
      
      @if (isRootPath()) {
        <div class="dashboard-home-anim">
          <h2 class="mb-6 text-2xl font-bold">Vue d'ensemble</h2>
          
          <div class="kpi-grid">
            <div class="kpi-card">
              <div class="kpi-icon blue"><i class="pi pi-users"></i></div>
              <div class="kpi-data">
                <span class="label">Total Utilisateurs</span>
                <span class="value">{{ userService.adminUsersCount() }}</span>
              </div>
            </div>

            <div class="kpi-card">
              <div class="kpi-icon green"><i class="pi pi-check-circle"></i></div>
              <div class="kpi-data">
                <span class="label">Templates Actifs</span>
                <span class="value">12</span>
              </div>
            </div>

            <div class="kpi-card">
              <div class="kpi-icon orange"><i class="pi pi-bolt"></i></div>
              <div class="kpi-data">
                <span class="label">Chiffre d'Affaires</span>
                <span class="value">1,240€</span>
              </div>
            </div>
          </div>
          
          <div class="quick-actions-section mt-8">
             <h3 class="text-lg font-semibold mb-4 text-gray-400">Actions Rapides</h3>
             <div class="quick-actions-grid">
                <button class="action-card" (click)="addTemplate()">
                  <div class="icon-circle"><i class="pi pi-plus"></i></div>
                  <span>Ajouter un Template</span>
                </button>
                <button class="action-card" (click)="goToSettings()">
                  <div class="icon-circle"><i class="pi pi-cog"></i></div>
                  <span>Paramètres Système</span>
                </button>
             </div>
          </div>
        </div>
      }
    </section>
  </main>
</div>